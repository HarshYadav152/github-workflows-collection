name: Template Lint

on:
  push:
    paths:
      - '.github/workflows/*.yml'
      - '.github/ISSUE_TEMPLATE/*.md'
  pull_request:
    paths:
      - '.github/workflows/*.yml'
      - '.github/ISSUE_TEMPLATE/*.md'

jobs:
  lint-workflows:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Validate workflow syntax
      run: |
        echo "üîç Validating GitHub Actions workflow syntax..."
        for workflow in .github/workflows/*.yml; do
          echo "Checking: $workflow"
          if grep -q "name:" "$workflow"; then
            echo "‚úÖ $workflow is valid"
          else
            echo "‚ùå $workflow is missing 'name' field"
            exit 1
          fi
        done
    
    - name: Lint issue templates
      run: |
        echo "üîç Validating issue templates..."
        for template in .github/ISSUE_TEMPLATE/*.md; do
          if grep -q "name:" "$template"; then
            echo "‚úÖ $template is valid"
          else
            echo "‚ö†Ô∏è Warning: $template might be missing frontmatter"
          fi
        done
    
    - name: Lint Success
      run: echo "‚úÖ All templates and workflows passed linting!"